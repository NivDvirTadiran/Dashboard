<app-widget-header
  [title]="widget?.title"
  [widgetId]="widget?.id"
  [disableRefresh]="widget?.state?.loading"
  (refreshClicked)="refreshWidget($event)"
  (settingsClicked)="openSettingsModal()">
</app-widget-header>

<app-widget-content-wrapper
  [loading]="widget?.state?.loading"
  [error]="widget?.state?.error">
  <!-- Specific widget content -->
  <app-gs-generic-graph
    *ngIf="chartData"
    [chartData]="chartData">
  </app-gs-generic-graph>
</app-widget-content-wrapper>

<app-widget-footer [lastUpdated]="widget?.state?.lastUpdated"></app-widget-footer>

<!-- Widget Settings Modal Component -->
<app-widget-settings-modal
  *ngIf="showSettingsModal && currentModalWidgetData"
  [widget]="currentModalWidgetData"
  [entitiesForSelection]="entitiesForSelection"
  [isLoading]="isLoading"
  (settingsSaved)="handleSettingsSaved($event)"
  (modalClosed)="handleModalClosed()">
</app-widget-settings-modal>
